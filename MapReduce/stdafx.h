#define SAFE_FREE(ptr) if (ptr != nullptr) {free(ptr); ptr = nullptr;}